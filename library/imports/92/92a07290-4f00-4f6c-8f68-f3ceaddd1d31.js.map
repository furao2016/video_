{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Scripts\\Core\\ResHandle/assets\\Scripts\\Core\\ResHandle\\lottery_BaseUrlLoad.js"],"names":["BaseUrlLoad","keyList","urlList","callbackList","suffixList","curKey","curUrl","curCallback","curSuffix","isLoading","key","url","suffix","callback","push","load","splice","cc","loader","loadCallback","bind","loadHead","err","data","length","SingletonBase"],"mappings":";;;;;;;;;;;;;AAAA;;;;;;;;;;;;IAEqBA;;;AAYjB,2BAAc;AAAA;;AAAA;;AAAA,cAVdC,OAUc,GAVJ,EAUI;AAAA,cATdC,OASc,GATJ,EASI;AAAA,cARdC,YAQc,GARC,EAQD;AAAA,cAPdC,UAOc,GAPD,EAOC;AAAA,cANdC,MAMc,GANL,EAMK;AAAA,cALdC,MAKc,GALL,EAKK;AAAA,cAJdC,WAIc,GAJA,IAIA;AAAA,cAHdC,SAGc,GAHF,EAGE;AAAA,cAFdC,SAEc,GAFF,KAEE;AAAA;AAEb;;;;;AAKD;;;;;;gCAMQC,KAAKC,KAAKC,QAAQC,UAAU;AAChC,iBAAKZ,OAAL,CAAaa,IAAb,CAAkBJ,GAAlB;AACA,iBAAKR,OAAL,CAAaY,IAAb,CAAkBH,GAAlB;AACA,iBAAKP,UAAL,CAAgBU,IAAhB,CAAqBF,MAArB;AACA,iBAAKT,YAAL,CAAkBW,IAAlB,CAAuBD,QAAvB;AACA,iBAAKE,IAAL;AACH;AACD;;;;mCACW;AACP,iBAAKN,SAAL,GAAiB,IAAjB;AACA,iBAAKJ,MAAL,GAAc,KAAKJ,OAAL,CAAae,MAAb,CAAoB,CAApB,EAAuB,CAAvB,EAA0B,CAA1B,CAAd;AACA,iBAAKV,MAAL,GAAc,KAAKJ,OAAL,CAAac,MAAb,CAAoB,CAApB,EAAuB,CAAvB,EAA0B,CAA1B,CAAd;AACA,iBAAKT,WAAL,GAAmB,KAAKJ,YAAL,CAAkBa,MAAlB,CAAyB,CAAzB,EAA4B,CAA5B,EAA+B,CAA/B,CAAnB;AACA,iBAAKR,SAAL,GAAiB,KAAKJ,UAAL,CAAgBY,MAAhB,CAAuB,CAAvB,EAA0B,CAA1B,EAA6B,CAA7B,CAAjB;AACAC,eAAGC,MAAH,CAAUH,IAAV,CAAe,EAAE,OAAO,KAAKT,MAAd,EAAsB,QAAQ,KAAKE,SAAnC,EAAf,EAA+D,KAAKW,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAA/D;AACH;;;+BACM;AACH,gBAAI,KAAKX,SAAT,EACI;AACJ,iBAAKY,QAAL;AACH;;;qCACYC,KAAKC,MAAM;AACpB,gBAAID,GAAJ,EAAS,CAAC;AACT,aADD,MAEK,CACJ;AACD,iBAAKf,WAAL,CAAiBe,GAAjB,EAAsBC,IAAtB,EAA4B,KAAKlB,MAAjC;AACA,gBAAI,KAAKH,OAAL,CAAasB,MAAb,GAAsB,CAA1B,EAA6B;AACzB,qBAAKH,QAAL;AACH,aAFD,MAGK;AACD,qBAAKZ,SAAL,GAAiB,KAAjB;AACH;AACJ;;;uCA1CqB;AAClB,mBAAO,IAAIT,WAAJ,EAAP;AACH;;;;EAlBoCyB;;kBAApBzB","file":"lottery_BaseUrlLoad.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Scripts\\Core\\ResHandle","sourcesContent":["import SingletonBase from \"../../Singleton/SingletonBase\";\r\n\r\nexport default class BaseUrlLoad extends SingletonBase {\r\n\r\n    keyList = []\r\n    urlList = []\r\n    callbackList = []\r\n    suffixList = []\r\n    curKey = \"\"\r\n    curUrl = \"\"\r\n    curCallback = null\r\n    curSuffix = \"\"\r\n    isLoading = false\r\n\r\n    constructor() {\r\n        super();\r\n    }\r\n    \r\n    static _onNewObject() {\r\n        return new BaseUrlLoad()\r\n    }\r\n    /**\r\n    从远程服务器获取资源\r\n    @param url 远程下载链接\r\n    @param suffix 资源类型 通常是填后缀，eg.  png txt jpg...\r\n    @param callback 下载完成回掉函数 \r\n    */\r\n    LoadUrl(key, url, suffix, callback) {\r\n        this.keyList.push(key);\r\n        this.urlList.push(url);\r\n        this.suffixList.push(suffix);\r\n        this.callbackList.push(callback);\r\n        this.load();\r\n    }\r\n    /*--------------------------------------内部私有方法------------------------------------- */\r\n    loadHead() {\r\n        this.isLoading = true;\r\n        this.curKey = this.keyList.splice(0, 1)[0];\r\n        this.curUrl = this.urlList.splice(0, 1)[0];\r\n        this.curCallback = this.callbackList.splice(0, 1)[0];\r\n        this.curSuffix = this.suffixList.splice(0, 1)[0];\r\n        cc.loader.load({ \"url\": this.curUrl, \"type\": this.curSuffix }, this.loadCallback.bind(this));\r\n    }\r\n    load() {\r\n        if (this.isLoading)\r\n            return;\r\n        this.loadHead();\r\n    }\r\n    loadCallback(err, data) {\r\n        if (err) {//下载出错\r\n        }\r\n        else {\r\n        }\r\n        this.curCallback(err, data, this.curKey)\r\n        if (this.urlList.length > 0) {\r\n            this.loadHead();\r\n        }\r\n        else {\r\n            this.isLoading = false;\r\n        }\r\n    }\r\n}"]}