{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Scripts\\UI\\view_videoPlay/assets\\Scripts\\UI\\view_videoPlay\\lottery_VideoPlayView.js"],"names":["cc","Class","extends","require","properties","exitBtn","Node","videoPlayBtn","videoCanvas","lottery_videoCom","inputEvents","bigCanvas","Sprite","loadNodes","OnInit","moduleName","node","stopAllActions","callFunc","rotation","bind","repfor","repeatForever","sequence","delayTime","runAction","lottery_MsgStation","getInstance","getVideoUrl","OnShow","onEnable","on","EventType","TOUCH_END","exitBtnDown","videoPlayBtnDown","systemEvent","lottery_EventDefine","URL_CHANGE","videoUrlChange","onDisable","off","OnHide","OnDispose","console","log","_onMessageHandel","data","initVideo","videoUrl","forEach","element","index","setUrl","onSendLogoutContent","onFullPlay","lottery_lotteryData","simulated","urls","master","HD","vice","screenBtnDown","event","isPlay","changeTargetSprite","active","SystemEvent","KEY_DOWN","escEvent","exitScreen","spriteFrame","keyCode","KEY","escape"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASC,QAAQ,2BAAR,CADJ;AAELC,gBAAY;AACRC,iBAASL,GAAGM,IADJ;AAERC,sBAAcP,GAAGM,IAFT;AAGRE,qBAAa,CAACC,0BAAD,CAHL;AAIRC,qBAAaV,GAAGM,IAJR;AAKRK,mBAAWX,GAAGY,MALN;AAMRC,mBAAW,CAACb,GAAGM,IAAJ;AANH,KAFP;AAUL;AACAQ,UAXK,oBAWI;AAAA;;AACL,aAAKC,UAAL,GAAkB,aAAlB;;AADK,mCAEIC,IAFJ;AAGD,gBAAIA,IAAJ,EAAU;AACNA,qBAAKC,cAAL;AACA,oBAAIC,WAAWlB,GAAGkB,QAAH,CAAY,YAAY;AACnCF,yBAAKG,QAAL,IAAiB,EAAjB;AACAH,yBAAKG,QAAL,IAAiB,GAAjB;AACH,iBAH0B,CAGzBC,IAHyB,OAAZ,CAAf;AAIA,oBAAIC,SAASrB,GAAGsB,aAAH,CAAiBtB,GAAGuB,QAAH,CAAYvB,GAAGwB,SAAH,CAAa,GAAb,CAAZ,EAA+BN,QAA/B,CAAjB,CAAb;AACAF,qBAAKS,SAAL,CAAeJ,MAAf;AACH;AAXA;;AAAA;AAAA;AAAA;;AAAA;AAEL,iCAAiB,KAAKR,SAAtB,8HAAiC;AAAA,oBAAxBG,IAAwB;;AAAA,sBAAxBA,IAAwB;AAUhC;AAZI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAaLU,qCAAmBC,WAAnB,GAAiCC,WAAjC;AACH,KAzBI;AA0BLC,UA1BK,oBA0BI,CAAG,CA1BP;AA2BLC,YA3BK,sBA2BM;AACP,aAAKzB,OAAL,CAAa0B,EAAb,CAAgB/B,GAAGM,IAAH,CAAQ0B,SAAR,CAAkBC,SAAlC,EAA6C,KAAKC,WAAlD,EAA+D,IAA/D;AACA,aAAK3B,YAAL,CAAkBwB,EAAlB,CAAqB/B,GAAGM,IAAH,CAAQ0B,SAAR,CAAkBC,SAAvC,EAAkD,KAAKE,gBAAvD,EAAyE,IAAzE;AACAnC,WAAGoC,WAAH,CAAeL,EAAf,CAAkBM,yCAAoBC,UAAtC,EAAkD,KAAKC,cAAvD,EAAuE,IAAvE;AACH,KA/BI;AAgCLC,aAhCK,uBAgCO;AACR,aAAKnC,OAAL,CAAaoC,GAAb,CAAiBzC,GAAGM,IAAH,CAAQ0B,SAAR,CAAkBC,SAAnC,EAA8C,KAAKC,WAAnD,EAAgE,IAAhE;AACA,aAAK3B,YAAL,CAAkBkC,GAAlB,CAAsBzC,GAAGM,IAAH,CAAQ0B,SAAR,CAAkBC,SAAxC,EAAmD,KAAKE,gBAAxD,EAA0E,IAA1E;AACAnC,WAAGoC,WAAH,CAAeK,GAAf,CAAmBJ,yCAAoBC,UAAvC,EAAmD,KAAKC,cAAxD,EAAwE,IAAxE;AACH,KApCI;AAqCLG,UArCK,oBAqCI,CAER,CAvCI;AAwCLC,aAxCK,uBAwCO;AACRC,gBAAQC,GAAR,CAAY,MAAZ;AACH,KA1CI;AA2CLC,oBA3CK,4BA2CYC,IA3CZ,EA2CkB,CAEtB,CA7CI;;AA8CL;AACAC,aA/CK,uBA+CO;AACR,YAAIC,WAAW,CAAC,mCAAD,EAAsC,qCAAtC,CAAf;AACA,aAAKzC,WAAL,CAAiB0C,OAAjB,CAAyB,UAACC,OAAD,EAAUC,KAAV,EAAoB;AACzCD,oBAAQE,MAAR,CAAeJ,SAASG,KAAT,CAAf;AACH,SAFD;AAGH,KApDI;;AAqDL;AACA;AACAlB,eAvDK,yBAuDS;AACVR,qCAAmBC,WAAnB,GAAiC2B,mBAAjC;AACH,KAzDI;;AA0DL;AACAnB,oBA3DK,8BA2Dc;AACfT,qCAAmBC,WAAnB,GAAiC4B,UAAjC;AACA,YAAIC,8BAAoB7B,WAApB,GAAkC8B,SAAtC,EAAiD;AAC7C;AACH;AACJ,KAhEI;;AAiEL;AACAlB,kBAlEK,4BAkEY;AACb,YAAImB,OAAOF,8BAAoB7B,WAApB,GAAkCsB,QAA7C;AACA,aAAKzC,WAAL,CAAiB,CAAjB,EAAoB6C,MAApB,CAA2BK,KAAKC,MAAL,CAAYC,EAAvC;AACA,aAAKpD,WAAL,CAAiB,CAAjB,EAAoB6C,MAApB,CAA2BK,KAAKG,IAAL,CAAUD,EAArC;AACH,KAtEI;;AAuEL;AACAE,iBAxEK,yBAwESC,KAxET,EAwEgBhB,IAxEhB,EAwEsB;AACvB,YAAI,CAAC,KAAKvC,WAAL,CAAiBuC,IAAjB,EAAuBiB,MAA5B,EAAoC;AACpC,aAAKxD,WAAL,CAAiBuC,IAAjB,EAAuBkB,kBAAvB,CAA0C,KAAKtD,SAA/C;AACA,aAAKD,WAAL,CAAiBwD,MAAjB,GAA0B,IAA1B;AACAlE,WAAGoC,WAAH,CAAeL,EAAf,CAAkB/B,GAAGmE,WAAH,CAAenC,SAAf,CAAyBoC,QAA3C,EAAqD,KAAKC,QAA1D,EAAoE,IAApE;AACH,KA7EI;;AA8EL;AACAC,cA/EK,wBA+EQ;AACT,aAAK3D,SAAL,CAAe4D,WAAf,GAA6B,IAA7B;AACA,aAAK7D,WAAL,CAAiBwD,MAAjB,GAA0B,KAA1B;AACAlE,WAAGoC,WAAH,CAAeK,GAAf,CAAmBzC,GAAGmE,WAAH,CAAenC,SAAf,CAAyBoC,QAA5C,EAAsD,KAAKC,QAA3D,EAAqE,IAArE;AACH,KAnFI;AAoFLA,YApFK,oBAoFIN,KApFJ,EAoFW;AACZ,gBAAQA,MAAMS,OAAd;AACI,iBAAKxE,GAAGyE,GAAH,CAAOC,MAAZ;AACI,qBAAKJ,UAAL;AACA;AAHR;AAKH;AA1FI,CAAT","file":"lottery_VideoPlayView.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Scripts\\UI\\view_videoPlay","sourcesContent":["import lottery_MsgStation, { simulationAward } from \"../../Data/lottery_MsgStation\";\nimport lottery_videoCom from \"../videoCom/lottery_videoCom\"\nimport lottery_lotteryData from '../../Data/lottery_lotteryData'\nimport { lottery_EventDefine } from \"../../Data/lottery_EventDefine\";\ncc.Class({\n    extends: require(\"lottery_viewBaseComponent\"),\n    properties: {\n        exitBtn: cc.Node,\n        videoPlayBtn: cc.Node,\n        videoCanvas: [lottery_videoCom],\n        inputEvents: cc.Node,\n        bigCanvas: cc.Sprite,\n        loadNodes: [cc.Node]\n    },\n    /*----------------------------------生命周期函数-----------------------------------------*/\n    OnInit() {\n        this.moduleName = \"videoSysPre\";\n        for (let node of this.loadNodes) {\n            if (node) {\n                node.stopAllActions();\n                let callFunc = cc.callFunc(function () {\n                    node.rotation += 30;\n                    node.rotation %= 360;\n                }.bind(this));\n                let repfor = cc.repeatForever(cc.sequence(cc.delayTime(0.1), callFunc));\n                node.runAction(repfor)\n            }\n        }\n        lottery_MsgStation.getInstance().getVideoUrl();\n    },\n    OnShow() { },\n    onEnable() {\n        this.exitBtn.on(cc.Node.EventType.TOUCH_END, this.exitBtnDown, this);\n        this.videoPlayBtn.on(cc.Node.EventType.TOUCH_END, this.videoPlayBtnDown, this);\n        cc.systemEvent.on(lottery_EventDefine.URL_CHANGE, this.videoUrlChange, this);\n    },\n    onDisable() {\n        this.exitBtn.off(cc.Node.EventType.TOUCH_END, this.exitBtnDown, this);\n        this.videoPlayBtn.off(cc.Node.EventType.TOUCH_END, this.videoPlayBtnDown, this);\n        cc.systemEvent.off(lottery_EventDefine.URL_CHANGE, this.videoUrlChange, this);\n    },\n    OnHide() {\n\n    },\n    OnDispose() {\n        console.log('2222');\n    },\n    _onMessageHandel(data) {\n\n    },\n    /*--------------------------------------相关设置-----------------------------------------*/\n    initVideo() {\n        let videoUrl = [\"ws://47.90.11.101:8081/lobbyB/L01\", \"ws://47.90.11.101:8081/lobbyB/L01-1\"];\n        this.videoCanvas.forEach((element, index) => {\n            element.setUrl(videoUrl[index]);\n        });\n    },\n    /*-------------------------------------------事件-----------------------------------------*/\n    //退出\n    exitBtnDown() {\n        lottery_MsgStation.getInstance().onSendLogoutContent();\n    },\n    //全屏播放\n    videoPlayBtnDown() {\n        lottery_MsgStation.getInstance().onFullPlay();\n        if (lottery_lotteryData.getInstance().simulated) {\n            simulationAward();\n        }\n    },\n    //地址更改\n    videoUrlChange() {\n        let urls = lottery_lotteryData.getInstance().videoUrl;\n        this.videoCanvas[0].setUrl(urls.master.HD);\n        this.videoCanvas[1].setUrl(urls.vice.HD);\n    },\n    //小窗口全屏播放\n    screenBtnDown(event, data) {\n        if (!this.videoCanvas[data].isPlay) return;\n        this.videoCanvas[data].changeTargetSprite(this.bigCanvas);\n        this.inputEvents.active = true;\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.escEvent, this);\n    },\n    //退出小屏的全屏播放\n    exitScreen() {\n        this.bigCanvas.spriteFrame = null;\n        this.inputEvents.active = false;\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.escEvent, this);\n    },\n    escEvent(event) {\n        switch (event.keyCode) {\n            case cc.KEY.escape:\n                this.exitScreen();\n                break;\n        }\n    }\n});"]}