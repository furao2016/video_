{"version":3,"sources":["..\\..\\..\\..\\assets\\Scripts/assets\\Scripts\\GameStart.js"],"names":["cc","Class","extends","Component","properties","loadingNode","Node","loadingProgress","ProgressBar","loadingStr","Label","start","_GameStart","sys","isBrowser","require","window","loader","loadRes","setLoadingProgress","bind","err","res","error","instance","lottery_MsgStation","getInstance","json","lottery_lotteryData","isLocal","local","work","httpServer","HttpServer","socketIP","SocketIP","socketPort","SocketPort","lottery_animDataMgr","init","lottery_loginViewCtr","Open","active","n","t","pre","node","progress","string","toFixed","document","exitFullscreen","one","director","setClearColor","Color","macro","ENABLE_TRANSPARENT_CANVAS","game","setFrameRate"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;AAELC,gBAAY;AACRC,qBAAaL,GAAGM,IADR;AAERC,yBAAiBP,GAAGQ,WAFZ;AAGRC,oBAAYT,GAAGU;AAHP,KAFP;AAOLC,SAPK,mBAOG;AACJ,aAAKC,UAAL;AACH,KATI;AAULA,cAVK,wBAUQ;AAAA;;AACT,YAAIZ,GAAGa,GAAH,CAAOC,SAAX,EAAsB;AACjBC,oBAAQ,KAAR,CAAD,CAAiBC,MAAjB,EADkB,CACQ;AAC1B;AACH;AACDhB,WAAGiB,MAAH,CAAUC,OAAV,CAAkB,QAAlB,EAA4B,KAAKC,kBAAL,CAAwBC,IAAxB,CAA6B,IAA7B,CAA5B,EAAgE,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC1E,gBAAID,GAAJ,EAAS;AACLrB,mBAAGuB,KAAH,CAASF,GAAT;AACA;AACH;AACD,gBAAIG,WAAWC,6BAAmBC,WAAnB,EAAf;AACA,gBAAIC,OAAOC,8BAAoBF,WAApB,GAAkCG,OAAlC,GAA4CP,IAAIQ,KAAhD,GAAwDR,IAAIS,IAAvE;AACAP,qBAASQ,UAAT,GAAsBL,KAAKM,UAA3B;AACAT,qBAASU,QAAT,GAAoBP,KAAKQ,QAAzB;AACAX,qBAASY,UAAT,GAAsBT,KAAKU,UAA3B;AACH,SAVD;AAWAC,sCAAoBZ,WAApB,GAAkCa,IAAlC,CAAuC,KAAKpB,kBAAL,CAAwBC,IAAxB,CAA6B,IAA7B,CAAvC,EAA2E,YAAM;AAC7EoB,2CAAqBd,WAArB,GAAmCe,IAAnC;AACA,kBAAKpC,WAAL,CAAiBqC,MAAjB,GAA0B,KAA1B;AACH,SAHD;AAKH,KA/BI;;;AAiCL;AACAvB,sBAlCK,8BAkCcwB,CAlCd,EAkCiBC,CAlCjB,EAkCoB;AACrB,YAAIC,MAAMF,IAAIC,CAAd;AACA,SAAC,KAAKnC,UAAL,CAAgBqC,IAAhB,CAAqBJ,MAAtB,KAAiC,KAAKjC,UAAL,CAAgBqC,IAAhB,CAAqBJ,MAArB,GAA8B,IAA/D;AACA,aAAKnC,eAAL,CAAqBwC,QAArB,GAAgCF,GAAhC;AACA,aAAKpC,UAAL,CAAgBuC,MAAhB,GAAyB,CAACH,MAAM,GAAP,EAAYI,OAAZ,CAAoB,CAApB,IAAyB,GAAlD;AACH;AAvCI,CAAT;AAyCA;AACAC,SAASC,cAAT,GAA0B,UAACC,GAAD,EAAS,CAAG,CAAtC;AACApD,GAAGqD,QAAH,CAAYC,aAAZ,CAA0B,IAAItD,GAAGuD,KAAP,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,CAA1B;AACAvD,GAAGwD,KAAH,CAASC,yBAAT,GAAqC,IAArC;AACAzD,GAAG0D,IAAH,CAAQC,YAAR,CAAqB,EAArB","file":"GameStart.js","sourceRoot":"..\\..\\..\\..\\assets\\Scripts","sourcesContent":["import lottery_MsgStation, { simulationAward } from \"./Data/lottery_MsgStation\";\r\nimport lottery_animDataMgr from \"./Data/lottery_animDataMgr\";\r\nimport lottery_VideoPlayCtr from \"./UI/view_videoPlay/lottery_VideoPlayCtr\";\r\nimport lottery_loginViewCtr from \"./UI/view_login/lottery_loginViewCtr\";\r\nimport lottery_lotteryData from \"./Data/lottery_lotteryData\";\r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        loadingNode: cc.Node,\r\n        loadingProgress: cc.ProgressBar,\r\n        loadingStr: cc.Label\r\n    },\r\n    start() {\r\n        this._GameStart();\r\n    },\r\n    _GameStart() {\r\n        if (cc.sys.isBrowser) {\r\n            (require('AAC'))(window); //初始化web端的直播视频\r\n            // (require('videoSocketController'))(ebet.baccarat); //初始化web端的直播视频\r\n        }\r\n        cc.loader.loadRes(\"config\", this.setLoadingProgress.bind(this), (err, res) => {\r\n            if (err) {\r\n                cc.error(err)\r\n                return\r\n            }\r\n            let instance = lottery_MsgStation.getInstance();\r\n            let json = lottery_lotteryData.getInstance().isLocal ? res.local : res.work;\r\n            instance.httpServer = json.HttpServer\r\n            instance.socketIP = json.SocketIP\r\n            instance.socketPort = json.SocketPort\r\n        })\r\n        lottery_animDataMgr.getInstance().init(this.setLoadingProgress.bind(this), () => {\r\n            lottery_loginViewCtr.getInstance().Open();\r\n            this.loadingNode.active = false;\r\n        });\r\n\r\n    },\r\n\r\n    //设置播放精度条\r\n    setLoadingProgress(n, t) {\r\n        let pre = n / t\r\n        !this.loadingStr.node.active && (this.loadingStr.node.active = true);\r\n        this.loadingProgress.progress = pre;\r\n        this.loadingStr.string = (pre * 100).toFixed(2) + '%';\r\n    }\r\n});\r\n//注册一个视频退出全屏事件,防止报错\r\ndocument.exitFullscreen = (one) => { };\r\ncc.director.setClearColor(new cc.Color(0, 0, 0, 0));\r\ncc.macro.ENABLE_TRANSPARENT_CANVAS = true;\r\ncc.game.setFrameRate(30);\r\n"]}