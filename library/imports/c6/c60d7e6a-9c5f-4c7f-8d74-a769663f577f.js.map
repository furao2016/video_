{"version":3,"sources":["..\\..\\..\\..\\assets\\Scripts/assets\\Scripts\\GameStart.js"],"names":["cc","Class","extends","Component","properties","loadingNode","Node","loadingProgress","ProgressBar","loadingStr","Label","start","_GameStart","sys","isBrowser","require","window","loader","loadRes","setLoadingProgress","bind","err","res","error","lotteryData","lottery_lotteryData","getInstance","simulated","network","envType","lottery_animDataMgr","init","active","lottery_VideoSysCtr","Open","n","t","pre","node","progress","string","toFixed","document","exitFullscreen","one","director","setClearColor","Color","macro","ENABLE_TRANSPARENT_CANVAS","game","setFrameRate"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;AAELC,gBAAY;AACRC,qBAAaL,GAAGM,IADR;AAERC,yBAAiBP,GAAGQ,WAFZ;AAGRC,oBAAYT,GAAGU;AAHP,KAFP;AAOLC,SAPK,mBAOG;AACJ,aAAKC,UAAL;AACH,KATI;AAULA,cAVK,wBAUQ;AAAA;;AACT,YAAIZ,GAAGa,GAAH,CAAOC,SAAX,EAAsB;AACjBC,oBAAQ,KAAR,CAAD,CAAiBC,MAAjB,EADkB,CACQ;AAC1B;AACH;AACDhB,WAAGiB,MAAH,CAAUC,OAAV,CAAkB,QAAlB,EAA4B,KAAKC,kBAAL,CAAwBC,IAAxB,CAA6B,IAA7B,CAA5B,EAAgE,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC1E,gBAAID,GAAJ,EAAS;AACLrB,mBAAGuB,KAAH,CAASF,GAAT;AACA;AACH;AACD,gBAAIG,cAAcC,8BAAoBC,WAApB,EAAlB;AACAF,wBAAYG,SAAZ,GAAwBL,IAAIK,SAA5B;AACAH,wBAAYI,OAAZ,GAAsBN,IAAIA,IAAIO,OAAR,CAAtB;AACH,SARD;AASAC,sCAAoBJ,WAApB,GAAkCK,IAAlC,CAAuC,KAAKZ,kBAAL,CAAwBC,IAAxB,CAA6B,IAA7B,CAAvC,EAA2E,YAAM;AAC9E;AACC,kBAAKf,WAAL,CAAiB2B,MAAjB,GAA0B,KAA1B;AACAC,0CAAoBP,WAApB,GAAkCQ,IAAlC;AACH,SAJD;AAMH,KA9BI;;;AAgCL;AACAf,sBAjCK,8BAiCcgB,CAjCd,EAiCiBC,CAjCjB,EAiCoB;AACrB,YAAIC,MAAMF,IAAIC,CAAd;AACA,SAAC,KAAK3B,UAAL,CAAgB6B,IAAhB,CAAqBN,MAAtB,KAAiC,KAAKvB,UAAL,CAAgB6B,IAAhB,CAAqBN,MAArB,GAA8B,IAA/D;AACA,aAAKzB,eAAL,CAAqBgC,QAArB,GAAgCF,GAAhC;AACA,aAAK5B,UAAL,CAAgB+B,MAAhB,GAAyB,CAACH,MAAM,GAAP,EAAYI,OAAZ,CAAoB,CAApB,IAAyB,GAAlD;AACH;AAtCI,CAAT;AAwCA;AACAC,SAASC,cAAT,GAA0B,UAACC,GAAD,EAAS,CAAG,CAAtC;AACA5C,GAAG6C,QAAH,CAAYC,aAAZ,CAA0B,IAAI9C,GAAG+C,KAAP,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,CAA1B;AACA/C,GAAGgD,KAAH,CAASC,yBAAT,GAAqC,IAArC;AACAjD,GAAGkD,IAAH,CAAQC,YAAR,CAAqB,EAArB","file":"GameStart.js","sourceRoot":"..\\..\\..\\..\\assets\\Scripts","sourcesContent":["import lottery_animDataMgr from \"./Data/lottery_animDataMgr\";\r\nimport lottery_loginViewCtr from \"./UI/view_login/lottery_loginViewCtr\";\r\nimport lottery_lotteryData from \"./Data/lottery_lotteryData\";\r\nimport lottery_VideoSysCtr from \"./UI/view_videoSys/lottery_VideoSysCtr\";\r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        loadingNode: cc.Node,\r\n        loadingProgress: cc.ProgressBar,\r\n        loadingStr: cc.Label\r\n    },\r\n    start() {\r\n        this._GameStart();\r\n    },\r\n    _GameStart() {\r\n        if (cc.sys.isBrowser) {\r\n            (require('AAC'))(window); //初始化web端的直播视频\r\n            // (require('videoSocketController'))(ebet.baccarat); //初始化web端的直播视频\r\n        }\r\n        cc.loader.loadRes(\"config\", this.setLoadingProgress.bind(this), (err, res) => {\r\n            if (err) {\r\n                cc.error(err)\r\n                return\r\n            }\r\n            let lotteryData = lottery_lotteryData.getInstance();\r\n            lotteryData.simulated = res.simulated;\r\n            lotteryData.network = res[res.envType];\r\n        })\r\n        lottery_animDataMgr.getInstance().init(this.setLoadingProgress.bind(this), () => {\r\n           // lottery_loginViewCtr.getInstance().Open();\r\n            this.loadingNode.active = false;\r\n            lottery_VideoSysCtr.getInstance().Open();\r\n        });\r\n\r\n    },\r\n\r\n    //设置播放精度条\r\n    setLoadingProgress(n, t) {\r\n        let pre = n / t\r\n        !this.loadingStr.node.active && (this.loadingStr.node.active = true);\r\n        this.loadingProgress.progress = pre;\r\n        this.loadingStr.string = (pre * 100).toFixed(2) + '%';\r\n    }\r\n});\r\n//注册一个视频退出全屏事件,防止报错\r\ndocument.exitFullscreen = (one) => { };\r\ncc.director.setClearColor(new cc.Color(0, 0, 0, 0));\r\ncc.macro.ENABLE_TRANSPARENT_CANVAS = true;\r\ncc.game.setFrameRate(30);\r\n"]}