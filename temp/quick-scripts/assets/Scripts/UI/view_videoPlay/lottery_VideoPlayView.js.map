{"version":3,"sources":["lottery_VideoPlayView.js"],"names":["cc","Class","extends","require","properties","exitBtn","Node","videoPlayBtn","videoCanvas","lottery_videoCom","inputEvents","bigCanvas","Sprite","loadNodes","OnInit","moduleName","off","EventType","TOUCH_END","exitBtnDown","videoPlayBtnDown","systemEvent","lottery_EventDefine","URL_CHANGE","videoUrlChange","on","node","stopAllActions","callFunc","rotation","bind","repfor","repeatForever","sequence","delayTime","runAction","OnShow","OnHide","console","log","OnDispose","_onMessageHandel","data","initVideo","videoUrl","forEach","element","index","setUrl","lottery_MsgStation","getInstance","onSendLogoutContent","onFullPlay","lottery_lotteryData","simulated","urls","master","HD","vice","screenBtnDown","event","loadOver","changeTargetSprite","active","SystemEvent","KEY_DOWN","escEvent","exitScreen","spriteFrame","keyCode","KEY","escape"],"mappings":"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","file":"lottery_VideoPlayView.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Scripts\\UI\\view_videoPlay","sourcesContent":["import lottery_MsgStation, { simulationAward } from \"../../Data/lottery_MsgStation\";\nimport lottery_videoCom from \"../videoCom/lottery_videoCom\"\nimport lottery_lotteryData from '../../Data/lottery_lotteryData'\nimport { lottery_EventDefine } from \"../../Data/lottery_EventDefine\";\ncc.Class({\n    extends: require(\"lottery_viewBaseComponent\"),\n    properties: {\n        exitBtn: cc.Node,\n        videoPlayBtn: cc.Node,\n        videoCanvas: [lottery_videoCom],\n        inputEvents: cc.Node,\n        bigCanvas: cc.Sprite,\n        loadNodes: [cc.Node]\n    },\n    /*----------------------------------生命周期函数-----------------------------------------*/\n    OnInit() {\n        this.moduleName = \"videoSysPre\";\n        this.exitBtn.off(cc.Node.EventType.TOUCH_END, this.exitBtnDown, this);\n        this.videoPlayBtn.off(cc.Node.EventType.TOUCH_END, this.videoPlayBtnDown, this);\n        cc.systemEvent.off(lottery_EventDefine.URL_CHANGE, this.videoUrlChange, this);\n        this.exitBtn.on(cc.Node.EventType.TOUCH_END, this.exitBtnDown, this);\n        this.videoPlayBtn.on(cc.Node.EventType.TOUCH_END, this.videoPlayBtnDown, this);\n        cc.systemEvent.on(lottery_EventDefine.URL_CHANGE, this.videoUrlChange, this);\n        for (let node of this.loadNodes) {\n            if (node) {\n                node.stopAllActions();\n                let callFunc = cc.callFunc(function () {\n                    node.rotation += 30;\n                    node.rotation %= 360;\n                }.bind(this));\n                let repfor = cc.repeatForever(cc.sequence(cc.delayTime(0.1), callFunc));\n                node.runAction(repfor)\n            }\n        }\n        this.videoUrlChange();\n    },\n    OnShow() { },\n    OnHide() {\n        console.log('111');\n    },\n    OnDispose() {\n        console.log('2222');\n    },\n    _onMessageHandel(data) {\n\n    },\n    /*--------------------------------------相关设置-----------------------------------------*/\n    initVideo() {\n        let videoUrl = [\"ws://47.90.11.101:8081/lobbyB/L01\", \"ws://47.90.11.101:8081/lobbyB/L01-1\"];\n        this.videoCanvas.forEach((element, index) => {\n            element.setUrl(videoUrl[index]);\n        });\n    },\n    /*-------------------------------------------事件-----------------------------------------*/\n    //退出\n    exitBtnDown() {\n        lottery_MsgStation.getInstance().onSendLogoutContent();\n    },\n    //全屏播放\n    videoPlayBtnDown() {\n        lottery_MsgStation.getInstance().onFullPlay();\n        if (lottery_lotteryData.getInstance().simulated) {\n            simulationAward();\n        }\n    },\n    //地址更改\n    videoUrlChange() {\n        let urls = lottery_lotteryData.getInstance().videoUrl;\n        this.videoCanvas[0].setUrl(urls.master.HD);\n        this.videoCanvas[1].setUrl(urls.vice.HD);\n    },\n    //小窗口全屏播放\n    screenBtnDown(event, data) {\n        if (!this.videoCanvas[data].loadOver) return;\n        this.videoCanvas[data].changeTargetSprite(this.bigCanvas);\n        this.inputEvents.active = true;\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.escEvent, this);\n    },\n    //退出小屏的全屏播放\n    exitScreen() {\n        this.bigCanvas.spriteFrame = null;\n        this.inputEvents.active = false;\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.escEvent, this);\n    },\n    escEvent(event) {\n        switch (event.keyCode) {\n            case cc.KEY.escape:\n                this.exitScreen();\n                break;\n        }\n    }\n});"]}